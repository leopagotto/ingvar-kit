graph TB
    START([User Describes Work])

    subgraph "Multi-Agent Orchestration v6.0.0"
        ORCHESTRATOR[Orchestrator Agent]
        CLASSIFY{Classify Task}

        ROUTE_DESIGNER[Designer Agent<br/>Mockups/Prototypes]
        ROUTE_FRONTEND[Frontend Agent<br/>Components]
        ROUTE_BACKEND[Backend Agent<br/>APIs]
        ROUTE_DEVOPS[DevOps Agent<br/>CI/CD]
        ROUTE_TESTING[Testing Agent<br/>Tests]
        ROUTE_DOCS[Documentation Agent<br/>Docs]
    end

    subgraph "Spec-First Decision v6.0.0"
        COMPLEXITY{Estimate<br/>Complexity}
        SIMPLE[Simple Task<br/>< 1 day]
        COMPLEX[Complex Feature<br/>> 1 week]
        CREATE_SPEC[Create Spec File]
        ASK_REVIEW[Ask User Review]
        BREAK_DOWN[Break into Issues]
    end

    subgraph "Designer-First Workflow v6.0.0"
        UI_CHECK{UI/UX<br/>Work?}
        DESIGNER_MOCKUP[Designer Creates Mockup]
        MOCKUP_REVIEW[Show to User]
        FRONTEND_IMPL[Frontend Implements]
    end

    subgraph "Issue Management"
        CREATE_ISSUE[gh issue create]
        ADD_PROJECT[Add to Project]
        SET_TODO[Status: Todo]
    end

    subgraph "Auto-Resolution"
        CHECK_CONFIG{auto-resolve<br/>enabled?}
        AUTO_START[Auto-Start]
        WAIT_REVIEW[Wait for Review]
    end

    subgraph "Development Workflow"
        START_WORK[Start Working]
        COMMENT_START[gh issue comment]
        CREATE_BRANCH[Create Branch]
        IMPLEMENT[Write Code]
        COMMIT[Commit with #issue]
        PUSH[Push to GitHub]
        CREATE_PR[Create PR]
        MERGE_PR[Merge PR]
        AUTO_CLOSE[Auto-Close Issue]
    end

    subgraph "GitHub Projects"
        TODO[Todo]
        INPROGRESS[In Progress]
        DONE[Done]
    end

    START --> ORCHESTRATOR
    ORCHESTRATOR --> CLASSIFY

    CLASSIFY -->|Design| ROUTE_DESIGNER
    CLASSIFY -->|Frontend| ROUTE_FRONTEND
    CLASSIFY -->|Backend| ROUTE_BACKEND
    CLASSIFY -->|DevOps| ROUTE_DEVOPS
    CLASSIFY -->|Testing| ROUTE_TESTING
    CLASSIFY -->|Docs| ROUTE_DOCS

    ROUTE_DESIGNER --> COMPLEXITY
    ROUTE_FRONTEND --> COMPLEXITY
    ROUTE_BACKEND --> COMPLEXITY
    ROUTE_DEVOPS --> COMPLEXITY
    ROUTE_TESTING --> COMPLEXITY
    ROUTE_DOCS --> COMPLEXITY

    COMPLEXITY -->|Simple| SIMPLE
    COMPLEXITY -->|Complex| COMPLEX

    SIMPLE --> CREATE_ISSUE
    COMPLEX --> CREATE_SPEC
    CREATE_SPEC --> ASK_REVIEW
    ASK_REVIEW --> BREAK_DOWN
    BREAK_DOWN --> CREATE_ISSUE

    CREATE_ISSUE --> UI_CHECK
    UI_CHECK -->|Yes| DESIGNER_MOCKUP
    UI_CHECK -->|No| ADD_PROJECT
    DESIGNER_MOCKUP --> MOCKUP_REVIEW
    MOCKUP_REVIEW --> FRONTEND_IMPL
    FRONTEND_IMPL --> ADD_PROJECT

    ADD_PROJECT --> SET_TODO
    SET_TODO --> TODO
    SET_TODO --> CHECK_CONFIG

    CHECK_CONFIG -->|true| AUTO_START
    CHECK_CONFIG -->|false| WAIT_REVIEW
    WAIT_REVIEW --> START_WORK
    AUTO_START --> START_WORK

    START_WORK --> COMMENT_START
    COMMENT_START --> CREATE_BRANCH
    CREATE_BRANCH --> IMPLEMENT
    IMPLEMENT --> COMMIT
    COMMIT --> INPROGRESS
    COMMIT --> PUSH
    PUSH --> CREATE_PR
    CREATE_PR --> MERGE_PR
    MERGE_PR --> DONE
    MERGE_PR --> AUTO_CLOSE

    style START fill:#4CAF50,stroke:#2E7D32,stroke-width:3px,color:#fff
    style ORCHESTRATOR fill:#E91E63,stroke:#880E4F,stroke-width:3px,color:#fff
    style CLASSIFY fill:#E91E63,stroke:#880E4F,stroke-width:2px,color:#fff
    style ROUTE_DESIGNER fill:#FF6B9D,stroke:#C2185B,stroke-width:2px,color:#fff
    style ROUTE_FRONTEND fill:#00BCD4,stroke:#006064,stroke-width:2px,color:#fff
    style ROUTE_BACKEND fill:#00BCD4,stroke:#006064,stroke-width:2px,color:#fff
    style ROUTE_DEVOPS fill:#00BCD4,stroke:#006064,stroke-width:2px,color:#fff
    style ROUTE_TESTING fill:#00BCD4,stroke:#006064,stroke-width:2px,color:#fff
    style ROUTE_DOCS fill:#00BCD4,stroke:#006064,stroke-width:2px,color:#fff
    style COMPLEXITY fill:#9C27B0,stroke:#4A148C,stroke-width:3px,color:#fff
    style UI_CHECK fill:#FF6B9D,stroke:#C2185B,stroke-width:3px,color:#fff
    style DESIGNER_MOCKUP fill:#FF6B9D,stroke:#C2185B,stroke-width:2px,color:#fff
    style FRONTEND_IMPL fill:#00BCD4,stroke:#006064,stroke-width:2px,color:#fff
    style TODO fill:#FFC107,stroke:#F57F17,stroke-width:2px,color:#000
    style INPROGRESS fill:#2196F3,stroke:#0D47A1,stroke-width:2px,color:#fff
    style DONE fill:#4CAF50,stroke:#2E7D32,stroke-width:2px,color:#fff
